{% extends 'MagBundle::base.html.twig' %}
{% block title %} Ajouter un article {% endblock %}
{% block pagetitle %} <h3> Ajouter un article </h3> {% endblock %}
{% block pagenav %}
    <ul class="breadcrumb">
        <li class="breadcrumb-item">Contenu</li>
        <li class="breadcrumb-item active"><a href="{{ path('contenu_add') }}">Ajout</a></li>
    </ul>
{% endblock %}
{% block body %}
    <style>
        input[type=radio]{ margin-right: 10px;}
    </style>

    <form action="{{ path('contenu_add') }}" {{ form_enctype(form) }} method="POST" >
    <div class="container">

        <div class="panel panel-primary">
            <div class="panel-heading">Article</div>
            <div class="panel-body">


                <div class="panel panel-info">
                    <div class="panel-heading">Article Intro</div>
                    <div class="panel-body">
                        <div >

                            {{ form_start(form, {'attr': {'class': 'form-horizontal'}}) }}
                            {{ form_errors(form) }}

                            <div class="col-lg-12">
                                <div class="card">
                                    <div class="card-body">


                                            <div class="form-group row">
                                                <label class="col-sm-3 form-control-label">Thème </label>
                                                <div class="col-sm-9" id="best">
                                                    {{ form_widget(form.theme, {'attr': {'class': 'form-control', 'id':'inputdefault'}}) }}<br>
                                                </div>
                                            </div><div class="form-group row">
                                                <label class="col-sm-3 form-control-label">Image Intro </label>
                                                <div class="col-sm-9">
                                                    {{ form_widget(form.file, {'attr': {'class': 'form-control', 'id':'inputdefault'}}) }}
                                                </div>
                                            </div><div class="form-group row">
                                                <label class="col-sm-3 form-control-label">Titre Intro </label>
                                                <div class="col-sm-9">
                                                    {{ form_widget(form.titreIntro, {'attr': {'class': 'form-control', 'id':'inputdefault'}}) }}
                                                </div>
                                            </div><div class="form-group row">
                                                <label class="col-sm-3 form-control-label">Texte Intro </label>
                                                <div class="col-sm-9">
                                                    {{ form_widget(form.texteIntro, {'attr': {'class': 'form-control', 'id':'inputdefault'}}) }}
                                                </div>
                                            </div>



                                    </div>
                                </div>
                            </div>

                        </div></div>
                </div>



                <div class="panel panel-info">
                    <div class="panel-heading">Article Suite</div>
                    <div class="panel-body">

                        <div class="col-lg-12">
                            <div class="card">
                                <div class="card-body">



                                        <div class="form-group row">
                                            <label class="col-sm-3 form-control-label">Image Article </label>
                                            <div class="col-sm-9">
                                                {{ form_widget(form.filea, {'attr': {'class': 'form-control', 'id':'inputdefault'}}) }}
                                            </div>
                                        </div><div class="form-group row">
                                            <label class="col-sm-3 form-control-label">Titre Article </label>
                                            <div class="col-sm-9">
                                                {{ form_widget(form.titreArticle, {'attr': {'class': 'form-control', 'id':'inputdefault'}}) }}
                                            </div>
                                        </div><div class="form-group row">
                                            <label class="col-sm-3 form-control-label">Texte Article </label>
                                            <div class="col-sm-9">
                                                {{ form_widget(form.texteArticle, {'attr': {'class': 'form-control', 'id':'inputdefault'}}) }}
                                            </div>
                                        </div>






                                    <div class="form-group row ">
                                            <label class="col-sm-3 form-control-label">Rubrique(s) </label>
                                            <div class="col-sm-9">
                                                <div class="container">
                                                    <div class="row">
                                                        <div class="col-lg-12">
                                                            <div class="button-group">
                                                                <button id="btn_list" type="button" class="btn btn-default" data-toggle="dropdown"><span>selectionner des rubriques </span> <span class="caret"></span></button>
                                                                <div id="rub" class="dropdown-menu relative heigh-div" style="overflow-y:scroll; ">
                                                                   {{ form_widget(form.rubrique, {'attr': {'class': 'test'}}) }}<br>
                                                            </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>


                                        <div class="form-group row">
                                            <label class="col-sm-3 form-control-label">Publier </label>
                                            <div class="col-sm-9">
                                                {{ form_widget(form.published, {'attr': {'class': 'form-control', 'id':'inputdefault'}}) }}
                                            </div>
                                        </div><div class="form-group row">
                                            <label class="col-sm-3 form-control-label">Date Début </label>
                                            <div class="col-sm-9">
                                                {{ form_widget(form.datePub, {'attr': {'class': 'form-control', 'id':'inputdefault'}}) }}
                                            </div>
                                        </div><div class="form-group row">
                                            <label class="col-sm-3 form-control-label">Date Fin </label>
                                            <div class="col-sm-9">
                                                {{ form_widget(form.dateFin, {'attr': {'class': 'form-control', 'id':'inputdefault'}}) }}
                                            </div>
                                        </div>

                                    <input type="text" id="ran" name="fname" style="display:none;" value="3">

                                        <div class="form-group row">
                                            <div class="col-sm-4 offset-sm-3">
                                                <button type="submit" class="btn">Enregistrer</button>
                                                <button type="submit" class="btn_info" id="add">Ajouter</button>
                                                {#<a href="{{ path('contenu_addForm',{'id': ids }) }}" class="btn btn-danger">
                                                    Supprimer
                                                </a>#}
                                            </div>
                                        </div>

                                </div>
                            </div>
                        </div>

                    </div>
                </div>


                <div class="row"> <a href="#demo" class="btnVed" data-toggle="collapse">Article en vedette</a></div>


                    <div id="demo" class="collapse">
                        <div class="panel panel-info">
                            <div class="panel-heading">Article en vedette</div>
                            <div class="panel-body">
                                <div class="col-lg-12">
                                    <div class="card">
                                        <div class="card-body">



                                                <div class="form-group row">
                                                    <label class="col-sm-3 form-control-label">Titre Article en vedette </label>
                                                    <div class="col-sm-9">
                                                        {{ form_widget(form.titre, {'attr': {'class': 'form-control', 'id':'inputdefault'}}) }}
                                                    </div>
                                                </div><div class="form-group row">
                                                    <label class="col-sm-3 form-control-label">Image Article en vedette </label>
                                                    <div class="col-sm-9">
                                                        {{ form_widget(form.fileb, {'attr': {'class': 'form-control', 'id':'inputdefault'}}) }}
                                                    </div>
                                                </div><div class="form-group row">
                                                    <label class="col-sm-3 form-control-label">Publier </label>
                                                    <div class="col-sm-9">
                                                        {{ form_widget(form.vpublished, {'attr': {'class': 'form-control', 'id':'inputdefault'}}) }}
                                                    </div>
                                                </div><div class="form-group row">
                                                    <label class="col-sm-3 form-control-label">Date Début </label>
                                                    <div class="col-sm-9">
                                                        {{ form_widget(form.datePubVed, {'attr': {'class': 'form-control', 'id':'inputdefault'}}) }}
                                                    </div>
                                                </div><div class="form-group row">
                                                    <label class="col-sm-3 form-control-label">Date Fin </label>
                                                    <div class="col-sm-9">
                                                        {{ form_widget(form.dateFinVed, {'attr': {'class': 'form-control', 'id':'inputdefault'}}) }}
                                                    </div>
                                                </div>

                                                <div class="form-group row">
                                                    <div class="col-sm-4 offset-sm-3">
                                                        <button type="submit" class="btn" >Enregistrer</button>

                                                    </div>
                                                </div>



                                        </div>
                                    </div>
                                </div>


                            </div>
                        </div>
                    </div>

            </div>
        </div>


    </div>

{{ form_end(form) }}
    </form>
{% endblock %}







{% block javascript %}
    <script>
        CKEDITOR.replace( 'businessmag_magbundle_article[titre]' );
    </script>
    <script>
        CKEDITOR.replace( 'businessmag_magbundle_article[texteIntro]' );
    </script>
    <script>
        CKEDITOR.replace( 'businessmag_magbundle_article[texteArticle]' );
    </script><script>
        CKEDITOR.replace( 'businessmag_magbundle_article[titreIntro]' );
    </script><script>
        CKEDITOR.replace( 'businessmag_magbundle_article[titreArticle]' );
    </script>

    <script>

        $(document).on('click', '#add', function (event) {


            event.stopPropagation();
           $('#ran').val(5);
            $(this).trigger('click');

        });

        $(document).on('change', '.controle-checkbox', function () {

            var max =5;

            var m  = $('input[name=businessmag_magbundle_article]:checked').length;
            var m1 = $('input.controle-checkbox:checked');

            $('.controle-checkbox').val(m);

            if(m >= max)
            {
                $('input[name=local]:checked')
                $('.controle-checkbox').not(m1).prop('disabled',this.checked);
            }
            else
            {
                $('.controle-checkbox').not(m1).prop('disabled',false);
            }
        });
    </script>

{% endblock %}